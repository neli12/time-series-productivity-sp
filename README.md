<img src = "https://img.shields.io/github/last-commit/neli12/time-series-productivity-sp"> <img src = "https://img.shields.io/github/languages/count/neli12/time-series-productivity-sp"> <img src = "https://img.shields.io/github/license/neli12/time-series-productivity-sp?color=green"> <img src = "https://img.shields.io/github/watchers/neli12/time-series-productivity-sp?style=social">

# Prediction of sugarcane productivity in the State of São Paulo

For a description in portuguese, see the README_pt.md file.

This repository contains the main steps to analyze time series of sugarcane productivity in the State of São Paulo. It is a final project required to obtain the MBA in Data Science and Analytics from the University of São Paulo. In this project, I will show how I used publicly available data, panel data analysis and machine learning algorithms to better understand how sugarcane yield has varied over the last 21 years (2000-2020) at the municipality level in the State of São Paulo (Brazil) and how this data can be used to predict future sugarcane yields (2021).

The first steps consisted of gathering all the necessary data. Sugarcane yield (kg/ha), planted area (ha) and other relevant datasets were obtained from the [SIDRA platform](https://sidra.ibge.gov.br/tabela/1612) platform of the IBGE (Brazilian Institute of Geography and Statistics). Weather and remote sensing variables were obtained and processed in the [Google Earth Engine](https://earthengine.google.com/) platform. TERRACLIMATE was used to obtain soil moisture (mm), minimum and maximum temperature (ºC), precipitation (mm) and evapotranspiration (mm). The land surface temperature (LST, K), the Nomalized Difference Vegetation Index (NDVI) and the Net Primary Productivity (NPP, kg C m2) were obtained from MODIS (Moderate Resolution Imaging Spectroradiometer), which has daily data whose average was calculated for each year and municipality. The Python scripts used to collect and pre-process the data in the Google Earth Engine platform are described in the `pre-processing` folder.

The file `Data analysis and cleaning.ipynb` is the code I used to load and process the tables and plot some figures to get an idea of how the data varies across the state. In the file `Modelagem.ipynb`, I performed the panel data analysis and machine learning. There I show how I partitioned the data, applied hyperparameter tuning, and how I used the SHAP to obtain the importance of the variables. 

My results demonstrated that the panel data analysis was not satisfactory to estimate historical and future sugarcane yields while the Gradient Boosting showed the best performance (see the figures below). I concluded that future works should focus on using environmental covariates of specific months to figure it out at which point of time would be better to use the variables (specially from remote sensing) to avoid averaging over a year, which seems to negatively impact the relationship with the sugarcane yield.

![yield data](https://github.com/neli12/time-series-productivity-sp/blob/main/figures/F5.jpg)
